From 8704dbae5c0766ed5e7d73cf879daf8296f18aac Mon Sep 17 00:00:00 2001
From: caiyinyu <caiyinyu@loongson.cn>
Date: Tue, 11 Jan 2022 14:11:25 +0800
Subject: [PATCH 22/32] tidy code in atomic-machine.h p7

---
 .../unix/sysv/linux/loongarch/atomic-machine.h  | 17 +----------------
 1 file changed, 1 insertion(+), 16 deletions(-)

diff --git a/sysdeps/unix/sysv/linux/loongarch/atomic-machine.h b/sysdeps/unix/sysv/linux/loongarch/atomic-machine.h
index dbae608ee5..53e3835ed3 100644
--- a/sysdeps/unix/sysv/linux/loongarch/atomic-machine.h
+++ b/sysdeps/unix/sysv/linux/loongarch/atomic-machine.h
@@ -19,24 +19,9 @@
 #ifndef _LINUX_LOONGARCH_BITS_ATOMIC_H
 #define _LINUX_LOONGARCH_BITS_ATOMIC_H 1
 
-#include <stdint.h>
-
-typedef int32_t atomic32_t;
-typedef uint32_t uatomic32_t;
-
-typedef int64_t atomic64_t;
-typedef uint64_t uatomic64_t;
-
-typedef intptr_t atomicptr_t;
-typedef uintptr_t uatomicptr_t;
-typedef intmax_t atomic_max_t;
-typedef uintmax_t uatomic_max_t;
-
 #define atomic_full_barrier() __sync_synchronize ()
 
-#ifdef __LP64__
-#define __HAVE_64B_ATOMICS 1
-#endif
+#define __HAVE_64B_ATOMICS (__loongarch_grlen >=64)
 #define USE_ATOMIC_COMPILER_BUILTINS 1
 #define ATOMIC_EXCHANGE_USES_CAS 0
 
-- 
2.35.1

